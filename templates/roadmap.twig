<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Firefly III ecosystem overview</title>
    <meta name="color-scheme" content="light dark">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-dark.min.css" rel="stylesheet">

    <meta name="theme-color" content="#111111" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#eeeeee" media="(prefers-color-scheme: dark)">
</head>
<body>
<div class="container">
    <h1>Firefly III ecosystem overview</h1>
    <p class="lead">
        {{ intro_text }}
    </p>

    {% for i, category in categories %}
        <div class="row">
            <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12 col-xs-12">
                {# show main category information #}
                <h2>{{ category.title }}</h2>
                {% if category.description %}<p>{{ category.description }}</p>{% endif %}

                {# show main category information items #}
                {% if category.info|length > 0 %}
                    <ul>
                        {% for ii, info in category.info %}
                            {% if 'ticket-task-chart' != info.type %}
                                {% include './partials/info-line.twig' with info %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                {% endif %}
                <div class="row">
                    {# list all sub categories #}
                    {% for ii,subcategory in category.children %}
                        <div class="col-6">
                            <div class="card mb-3">
                                <h5 class="card-title card-header">{{ subcategory.title }}</h5>
                                <div class="card-body">
                                    {% if subcategory.description %}
                                        <p class="card-text">{{ subcategory.description }}</p>
                                    {% endif %}

                                    {# show subcategory info items. #}
                                    {% if subcategory.info|length > 0 %}
                                        <ul>
                                            {% for iii,info in subcategory.info %}
                                                {% if 'simple-link' != info.type %}
                                                    {% include './partials/info-line.twig' with info %}
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    {% endif %}

                                    {#  set of debug / example items. #}
                                    {#
                                    <ul>
                                        <li>PHPStan has complaints</li>
                                        <li>sonar cloud tags if project exists</li>
                                    </ul>
                                    #}

                                    {#  basic info for subcategory #}
                                    {% if subcategory.info|length > 0 %}
                                        {% for iii,info in subcategory.info %}
                                            {% if 'badge' == info.type %}
                                                {% if 'up2date' == info.label %}
                                                    <img src="https://img.shields.io/static/v1?label=Status&message=Kept%20up-to-date&color=blue"
                                                         title="Kept up-to-date" alt="Kept up-to-date"/>
                                                {% elseif 'bugfixes' == info.label %}
                                                    <img src="https://img.shields.io/static/v1?label=Status&message=Bugfixes%20only&color=yellow"
                                                         title="Bugfixes only" alt="Bugfixes only"/>
                                                {% elseif 'active' == info.label %}
                                                    <img src="https://img.shields.io/static/v1?label=Status&message=Active%20development&color=green"
                                                         title="Active development" alt="Active development"/>
                                                {% elseif 'inactive' == info.label %}
                                                    <img src="https://img.shields.io/static/v1?label=Status&message=No%20activity%20(yet)&color=inactive"
                                                         title="Active development" alt="Active development"/>
                                                {% else %}
                                                    <img src="https://img.shields.io/static/v1?label=BAD&message=BAD&color=critical">
                                                {% endif %}
                                            {% endif %}
                                            {#     {% include './partials/info-line.twig' with info %} #}
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="card-footer">
                                    {% for iii,info in subcategory.info %}
                                        {% if 'simple-link' == info.type %}
                                            <a class="card-link" href="{{ info.url }}"
                                               title="{{ info.title }}">{{ info.title }}</a>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>

                {% for ii, info in category.info %}
                    {% if 'ticket-task-chart' == info.type %}
                        <div class="row">
                            <div class="col">
                                <h4>{{ info.title }}</h4>
                                <p>
                                    {{ info.description }}
                                    For more information, see <a href="{{ info.website }}"
                                                                 title="{{ info.website_title }}">{{ info.website_title }}</a>.
                                </p>
                                <div style="width: 800px;">
                                    <canvas id="{{ info.hash }}"></canvas>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}

            </div>
            <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-xs-12">
                &nbsp;
            </div>
        </div>
    {% endfor %}

    <h1>Support</h1>
    <p>
        If you need support using Firefly III or the associated tools, come find us!
    </p>
    <ul>
        <li><a href="https://github.com/orgs/firefly-iii/discussions">GitHub Discussions for questions and support</a>
        </li>
        <li><a href="https://gitter.im/firefly-iii/firefly-iii">Gitter.im for a good chat and a quick answer</a></li>
        <li><a href="https://github.com/firefly-iii/firefly-iii/issues">GitHub Issues for bugs and issues</a></li>
        <li><a href="https://fosstodon.org/@ff3">Follow me around for news and updates on Mastodon</a></li>
        <li><a href="mailto:james@firefly-iii.org">Email me</a></li>
    </ul>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
{% for i, category in categories %}
    {% for ii, info in category.info %}
        {% if 'ticket-task-chart' == info.type %}
            <script type="module" src="{{ info.hash }}.js"></script>
        {% endif %}
    {% endfor %}
{% endfor %}

</body>
</html>
